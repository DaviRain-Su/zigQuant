# Prometheus Metrics - Bug 追踪

> 已知问题和修复状态

**最后更新**: 2025-12-28

---

## 已知问题

### 开放问题

暂无已知问题 (功能尚未实现)

---

## 已修复问题

暂无修复记录

---

## 问题模板

### 问题报告格式

```markdown
### [BUG-XXX] 问题标题

**严重程度**: 严重 | 一般 | 轻微
**状态**: 开放 | 进行中 | 已修复
**发现日期**: YYYY-MM-DD
**修复日期**: YYYY-MM-DD (如已修复)

**描述**:
[问题描述]

**复现步骤**:
1. 步骤 1
2. 步骤 2
3. ...

**预期行为**:
[预期结果]

**实际行为**:
[实际结果]

**环境**:
- OS: Linux/macOS/Windows
- Zig 版本: 0.15.x
- zigQuant 版本: v1.0.0

**解决方案**:
[修复方案，如已修复]
```

---

## 已知限制

### 当前版本限制

1. **高基数标签**
   - 标签组合数量无硬限制
   - 可能导致内存溢出
   - 计划在 v1.1.0 添加限制

2. **无持久化**
   - 重启后所有指标归零
   - 需要外部存储 (Prometheus)

3. **单一导出格式**
   - 仅支持 Prometheus text format
   - 不支持 OpenMetrics/Protobuf
   - 计划在 v1.2.0 支持 OpenMetrics

4. **无指标聚合**
   - 不支持跨时间窗口聚合
   - 依赖 Prometheus 进行聚合

5. **锁竞争**
   - 高并发导出可能阻塞更新
   - 计划在 v1.1.0 优化为读写锁

---

## 性能问题

### 待优化项

1. **标签键字符串分配**
   - 每次 incCounter 都分配新字符串
   - 影响: 高频更新时 GC 压力
   - 缓解: 使用标签缓存

2. **导出时全量遍历**
   - 每次导出遍历所有指标
   - 影响: 大量指标时延迟增加
   - 缓解: 增量导出或缓存输出

---

## 反馈渠道

- GitHub Issues: https://github.com/DaviRain-Su/zigQuant/issues
- 讨论区: https://github.com/DaviRain-Su/zigQuant/discussions

---

*Last updated: 2025-12-28*
