# MessageBus - æ›´æ–°æ—¥å¿—

**ç‰ˆæœ¬**: v0.5.0
**çŠ¶æ€**: è®¡åˆ’ä¸­
**æœ€åæ›´æ–°**: 2025-12-27

---

## ç‰ˆæœ¬å†å²

### v0.5.0 (è®¡åˆ’ä¸­)

**å‘å¸ƒæ—¥æœŸ**: å¾…å®š
**çŠ¶æ€**: ğŸ“‹ è®¡åˆ’ä¸­

#### æ–°å¢åŠŸèƒ½

- [ ] MessageBus æ ¸å¿ƒå®ç°
  - Publish-Subscribe æ¨¡å¼
  - Request-Response æ¨¡å¼
  - Command æ¨¡å¼ (Fire-and-Forget)

- [ ] äº‹ä»¶ç±»å‹ç³»ç»Ÿ
  - MarketDataEvent
  - OrderEvent / OrderFillEvent
  - PositionEvent
  - AccountEvent
  - SystemEvent (Tick, Shutdown)

- [ ] é€šé…ç¬¦ä¸»é¢˜åŒ¹é…
  - æ”¯æŒ `*` åç¼€é€šé…ç¬¦
  - ç¤ºä¾‹: `market_data.*` åŒ¹é…æ‰€æœ‰å¸‚åœºæ•°æ®

- [ ] ç±»å‹å®‰å…¨çš„äº‹ä»¶å¤„ç†
  - ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
  - Handler å‡½æ•°ç±»å‹å®šä¹‰

#### æ€§èƒ½ç›®æ ‡

- [ ] å‘å¸ƒå»¶è¿Ÿ < 1Î¼s
- [ ] ååé‡ > 100,000 events/sec
- [ ] é›¶è¿è¡Œæ—¶å†…å­˜åˆ†é…

#### å·²çŸ¥é™åˆ¶

- å•çº¿ç¨‹è®¾è®¡ï¼ˆv0.5.0 èŒƒå›´ï¼‰
- é€šé…ç¬¦ä»…æ”¯æŒæœ«å°¾ `*`

---

## è®¡åˆ’ä¸­çš„åŠŸèƒ½

### v0.6.0+ (æœªæ¥ç‰ˆæœ¬)

- å¤šçº¿ç¨‹æ”¯æŒ (ThreadSafeMessageBus)
- äº‹ä»¶ä¼˜å…ˆçº§é˜Ÿåˆ—
- äº‹ä»¶æŒä¹…åŒ–
- åˆ†å¸ƒå¼ MessageBus
- æ›´å¤æ‚çš„é€šé…ç¬¦æ¨¡å¼

---

## è¿ç§»æŒ‡å—

### ä»æ—§æ¶æ„è¿ç§»åˆ° MessageBus

v0.4.0 åŠä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨ç›´æ¥å‡½æ•°è°ƒç”¨ï¼Œv0.5.0 å¼•å…¥ MessageBus äº‹ä»¶é©±åŠ¨æ¶æ„ã€‚

#### ä¹‹å‰ (v0.4.0)

```zig
// ç›´æ¥è°ƒç”¨ç­–ç•¥
strategy.onData(market_data);

// ç›´æ¥è°ƒç”¨æ‰§è¡Œ
executor.submit(order);
```

#### ä¹‹å (v0.5.0)

```zig
// é€šè¿‡ MessageBus å‘å¸ƒäº‹ä»¶
try message_bus.publish("market_data.BTC-USDT", .{
    .market_data = market_data,
});

// é€šè¿‡ MessageBus è¯·æ±‚æ‰§è¡Œ
const response = try message_bus.request("order.submit", .{
    .submit_order = order,
});
```

#### è¿ç§»æ­¥éª¤

1. åˆå§‹åŒ– MessageBus
2. å°†ç»„ä»¶æ³¨å†Œä¸ºäº‹ä»¶å¤„ç†å™¨
3. æ›¿æ¢ç›´æ¥è°ƒç”¨ä¸ºäº‹ä»¶å‘å¸ƒ
4. æµ‹è¯•éªŒè¯è¡Œä¸ºä¸€è‡´

---

## ç›¸å…³æ–‡æ¡£

- [åŠŸèƒ½æ¦‚è§ˆ](./README.md)
- [API å‚è€ƒ](./api.md)
- [å®ç°ç»†èŠ‚](./implementation.md)

---

**ç‰ˆæœ¬**: v0.5.0
**çŠ¶æ€**: è®¡åˆ’ä¸­
