# DataEngine - æ›´æ–°æ—¥å¿—

**ç‰ˆæœ¬**: v0.5.0
**çŠ¶æ€**: è®¡åˆ’ä¸­
**æœ€åŽæ›´æ–°**: 2025-12-27

---

## ç‰ˆæœ¬åŽ†å²

### v0.5.0 (è®¡åˆ’ä¸­)

**å‘å¸ƒæ—¥æœŸ**: å¾…å®š
**çŠ¶æ€**: ðŸ“‹ è®¡åˆ’ä¸­

#### æ–°å¢žåŠŸèƒ½

- [ ] DataEngine æ ¸å¿ƒå®žçŽ°
  - å›žæµ‹æ¨¡å¼ (CSV æ•°æ®æº)
  - å®žç›˜æ¨¡å¼ (WebSocket æ•°æ®æº)
  - ç»Ÿä¸€æ•°æ®æŽ¥å£

- [ ] Code Parity æ”¯æŒ
  - ç›¸åŒç­–ç•¥ä»£ç é€‚ç”¨äºŽå›žæµ‹å’Œå®žç›˜
  - ç»Ÿä¸€äº‹ä»¶å‘å¸ƒæœºåˆ¶
  - ä¸€è‡´çš„æ•°æ®æ ¼å¼

- [ ] æ•°æ®æºç®¡ç†
  - CSV æ•°æ®æº
  - WebSocket æ•°æ®æº
  - è‡ªå®šä¹‰æ•°æ®æºæŽ¥å£

- [ ] K çº¿æž„å»º
  - å®žæ—¶ K çº¿èšåˆ
  - å¤šæ—¶é—´æ¡†æž¶æ”¯æŒ
  - åŽ†å² K çº¿ç¼“å­˜

- [ ] MessageBus é›†æˆ
  - è‡ªåŠ¨å‘å¸ƒå¸‚åœºæ•°æ®äº‹ä»¶
  - ç³»ç»Ÿäº‹ä»¶ (tick, shutdown)

#### æ€§èƒ½ç›®æ ‡

- [ ] å›žæµ‹åžåé‡ > 100,000 events/sec
- [ ] äº‹ä»¶å»¶è¿Ÿ P99 < 1ms
- [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ–

#### å·²çŸ¥é™åˆ¶

- CSV æ ¼å¼éœ€ç¬¦åˆè§„èŒƒ
- WebSocket ä¾èµ– libxev

---

## è®¡åˆ’ä¸­çš„åŠŸèƒ½

### v0.6.0+ (æœªæ¥ç‰ˆæœ¬)

- æ›´å¤šæ•°æ®æºç±»åž‹
  - Parquet æ–‡ä»¶
  - æ•°æ®åº“è¿žæŽ¥
  - REST API è½®è¯¢

- æ•°æ®é¢„å¤„ç†
  - æ•°æ®æ¸…æ´—
  - ç¼ºå¤±å€¼å¡«å……
  - å¼‚å¸¸å€¼æ£€æµ‹

- å¤šäº¤æ˜“æ‰€æ”¯æŒ
  - Binance
  - OKX
  - å…¶ä»– CEX/DEX

---

## è¿ç§»æŒ‡å—

### ä»Ž v0.4.0 BacktestEngine è¿ç§»

v0.4.0 ä½¿ç”¨ç‹¬ç«‹çš„ BacktestEngineï¼Œv0.5.0 ç»Ÿä¸€ä¸º DataEngineã€‚

#### ä¹‹å‰ (v0.4.0)

```zig
// å›žæµ‹ä¸“ç”¨å¼•æ“Ž
var backtest = try BacktestEngine.init(allocator, config);
backtest.loadData("data/BTC-USDT.csv");
backtest.run();
```

#### ä¹‹åŽ (v0.5.0)

```zig
// ç»Ÿä¸€æ•°æ®å¼•æ“Ž
var data_engine = try DataEngine.init(allocator, &bus, &cache, .{
    .mode = .backtest,
});
try data_engine.addSource(.{ .csv = .{ .path = "data/BTC-USDT.csv" } });
try data_engine.start();
```

#### è¿ç§»æ­¥éª¤

1. æ›¿æ¢ BacktestEngine ä¸º DataEngine
2. é…ç½®ä¸ºå›žæµ‹æ¨¡å¼
3. é€šè¿‡ MessageBus è®¢é˜…æ•°æ®äº‹ä»¶
4. ç­–ç•¥ä»£ç æ— éœ€ä¿®æ”¹ï¼ˆCode Parityï¼‰

---

## ç›¸å…³æ–‡æ¡£

- [åŠŸèƒ½æ¦‚è§ˆ](./README.md)
- [API å‚è€ƒ](./api.md)
- [å®žçŽ°ç»†èŠ‚](./implementation.md)

---

**ç‰ˆæœ¬**: v0.5.0
**çŠ¶æ€**: è®¡åˆ’ä¸­
