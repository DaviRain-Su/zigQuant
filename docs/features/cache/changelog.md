# Cache - æ›´æ–°æ—¥å¿—

**ç‰ˆæœ¬**: v0.5.0
**çŠ¶æ€**: è®¡åˆ’ä¸­
**æœ€åæ›´æ–°**: 2025-12-27

---

## ç‰ˆæœ¬å†å²

### v0.5.0 (è®¡åˆ’ä¸­)

**å‘å¸ƒæ—¥æœŸ**: å¾…å®š
**çŠ¶æ€**: ğŸ“‹ è®¡åˆ’ä¸­

#### æ–°å¢åŠŸèƒ½

- [ ] Cache æ ¸å¿ƒå®ç°
  - Order ç¼“å­˜ (O(1) æŸ¥æ‰¾)
  - Position ç¼“å­˜ (O(1) æŸ¥æ‰¾)
  - Account ç¼“å­˜ (O(1) æŸ¥æ‰¾)
  - Quote ç¼“å­˜ (O(1) æŸ¥æ‰¾)
  - Instrument ç¼“å­˜

- [ ] MessageBus é›†æˆ
  - è‡ªåŠ¨è®¢é˜…äº‹ä»¶
  - äº‹ä»¶é©±åŠ¨æ›´æ–°

- [ ] äºŒçº§ç´¢å¼•
  - æŒ‰äº¤æ˜“å¯¹æŸ¥è¯¢è®¢å•
  - æŒ‰çŠ¶æ€æŸ¥è¯¢è®¢å•

- [ ] å¿«ç…§åŠŸèƒ½
  - åˆ›å»ºç¼“å­˜å¿«ç…§
  - ä»å¿«ç…§æ¢å¤

#### æ€§èƒ½ç›®æ ‡

- [ ] æŸ¥è¯¢å»¶è¿Ÿ < 100ns
- [ ] æ›´æ–°ååé‡ > 100,000/sec
- [ ] å†…å­˜æ•ˆç‡ä¼˜åŒ–

#### å·²çŸ¥é™åˆ¶

- å•çº¿ç¨‹è®¾è®¡ï¼ˆv0.5.0 èŒƒå›´ï¼‰
- ä¸æ”¯æŒæŒä¹…åŒ–ï¼ˆå†…å­˜ç¼“å­˜ï¼‰

---

## è®¡åˆ’ä¸­çš„åŠŸèƒ½

### v0.6.0+ (æœªæ¥ç‰ˆæœ¬)

- å¤šçº¿ç¨‹æ”¯æŒ (ThreadSafeCache)
- ç¼“å­˜æŒä¹…åŒ–
- åˆ†å¸ƒå¼ç¼“å­˜
- ç¼“å­˜é¢„çƒ­
- LRU æ·˜æ±°ç­–ç•¥

---

## è¿ç§»æŒ‡å—

### ä»ç›´æ¥çŠ¶æ€ç®¡ç†è¿ç§»åˆ° Cache

v0.4.0 åŠä¹‹å‰ç‰ˆæœ¬å„ç»„ä»¶ç‹¬ç«‹ç®¡ç†çŠ¶æ€ï¼Œv0.5.0 å¼•å…¥ç»Ÿä¸€ Cacheã€‚

#### ä¹‹å‰ (v0.4.0)

```zig
// ç­–ç•¥ç›´æ¥ç®¡ç†çŠ¶æ€
const Strategy = struct {
    positions: HashMap(Position),
    orders: HashMap(Order),

    pub fn getPosition(self: *Strategy, id: []const u8) ?Position {
        return self.positions.get(id);
    }
};
```

#### ä¹‹å (v0.5.0)

```zig
// é€šè¿‡ Cache æŸ¥è¯¢çŠ¶æ€
const Strategy = struct {
    cache: *Cache,

    pub fn getPosition(self: *Strategy, id: []const u8) ?*const Position {
        return self.cache.getPosition(id);
    }
};
```

#### è¿ç§»æ­¥éª¤

1. åˆå§‹åŒ– Cache å¹¶è¿æ¥ MessageBus
2. ç§»é™¤ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€å­˜å‚¨
3. æ”¹ç”¨ Cache æŸ¥è¯¢æ–¹æ³•
4. éªŒè¯äº‹ä»¶é©±åŠ¨æ›´æ–°æ­£å¸¸å·¥ä½œ

---

## ç›¸å…³æ–‡æ¡£

- [åŠŸèƒ½æ¦‚è§ˆ](./README.md)
- [API å‚è€ƒ](./api.md)
- [å®ç°ç»†èŠ‚](./implementation.md)

---

**ç‰ˆæœ¬**: v0.5.0
**çŠ¶æ€**: è®¡åˆ’ä¸­
